# IntersystemsCache-Barcode-HTML-generator-Code128

Этот генератор предназначен для генерации штрихкодов в кодировке Code128. Более подробно о структуре кода можно посмотреть на 
https://www.webcitation.org/66t8IbBVl?url=http://tradepilot.ru/goods-marks/code128 , хотя для использования этого генератора это не требуется

Генератор формирует штриховые полосы с использованием HTML разметки, без использования изображений, что облегчает его использование на сайтах и в письмах. Генератор кодирует стартовый символ, данные, контрольную сумму и стоповый символ, что позволяет использовать его без знания структуры кода (в отличии от генерации, основанной на шрифте).

Генерация состоит из двух фаз:
1. Определение кодовой последовательности, это основной технически сложный момент
 ```
>w ##class(Lib.BarCode128).GetCodeLineForText("1234")
2112321122321311231212412331112
``` 
Понимать эту последовательность нужно так:
- черная полоса 2 условных единицы толщины
- белая полоса 1 у.е. толщины
- черная полоса 1 у.е. толщины
- белая полоса 2 у.е. толщины
- черная полоса 3 у.е. толщины
- ...

2. Отрисовка этой последовательности в HTML\
```
>w ##class(Lib.BarCode128).GenerateHtml("2112321122321311231212412331112")
```
Я отрисовываю штрихкод в виде таблицы, где каждая условная единица - одна ячейка. В примере выше будет две черных ячейки - одна белая - одна черная - две белых ...\
Это деревянный, но, на мой взгляд, достаточно надежный способ. Вам не составит труда придумать свой.


Пример использование:
http://localhost:57772/csp/user/testbarcode.csp?barcode=12345

Содержимое testbarcode.csp:

```html
<code>
<html>
<head>
</head>
<body style='background-color:white;'>
<div style='margin-left:300px;margin-top:300px;height:200px;width:600px;'>
	#(##class(Lib.BarCode128).GenerateHtml(%request.Get("barcode")))#
</div>
</body>
</html>
</code>
```
